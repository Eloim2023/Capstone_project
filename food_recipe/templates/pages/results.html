{% extends 'base.html' %}

{% block title %}Results{% endblock title %}

{% block content %}
<body class="resultBody">
    <h3 style="margin: 2% 0 2% 10%;" class="resultTitle">Search Results For: <span style="font-weight: bold">{{ search_query }}</span> </h3>
    {% if results %}
        <div class="resultCont">
        {% for recipe in results %}
            <div class="card">
                <a class="cardA" href="{% url 'details' recipe.id %}">
                    
                <img src="{{ recipe.image_url }}" class="card-img-top cardImage" alt="{{ recipe.title }} image" style="height: 11rem;">
                </a>
                <form class="heartForm" action="POST">
                    <a class="heartA" href="{% url 'save_recipe' recipe.id %}">
                        <div class="iDiv">
                            <i class="fa fa-heart"></i>
                        </div>
                    </a>
                </form>
                <div class="card-body">
                    <h5 class="card-title">{{ recipe.title }}</h5>
                </div>
            
            </div>
        {% endfor %}
    </div>
    <div class="pageCont">
        {% if next_page %}
            {% if previous_page %}
                <form method="POST" action="{% url 'previous_results' %}">
                    {% csrf_token %}
                    <input type="hidden" name="search_query" value="{{ search_query }}">
                    <input type="hidden" name="current_page_url" value="{{ current_page }}">
                    <input type="hidden" name="next_page_url" value="{{ next_page }}">
                    <input type="hidden" name="previous_page_url" value="{{ previous_page}}">
                    <button type="submit" class="btn btn-primary">Previous</button>
                </form>
            {% else %}
                <form method="POST" action="{% url 'previous_results' %}">
                    {% csrf_token %}
                    <input type="hidden" name="search_query" value="{{ search_query }}">
                    <input type="hidden" name="current_page_url" value="{{ current_page }}">
                    <input type="hidden" name="next_page_url" value="{{ next_page }}">
                    <input type="hidden" name="previous_page_url" value="{{ previous_page}}">
                    <button type="submit" class="btn btn-primary" disabled>Previous</button>
                </form>
            {% endif %}
                <form method="POST" action="{% url 'next_results' %}">
                    {% csrf_token %}
                    <input type="hidden" name="search_query" value="{{ search_query }}">
                    <input type="hidden" name="current_page_url" value="{{ current_page }}">
                    <input type="hidden" name="next_page_url" value="{{ next_page }}">
                    <input type="hidden" name="previous_page_url" value="{{ previous_page}}">
                    <button type="submit" class="btn btn-primary">Next</button>
                </form>
        {% endif %}
    </div>    
    {% else %}
        <h3>No Results Found.</h3>
    {% endif %}
</body>

{% endblock content %}